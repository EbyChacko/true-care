# Testing

Back to [README.MD](README.md)<br>

## Table of contents
* [Code Validation](#code-validation)
* [User Story and Feature Testing](#user-story-and-feature-testing)
* [Automated View Testing](#automated-view-testing)
* [Browser Testing](#browser-testing)
* [Bugs](#bugs)


## Code Validation
### HTML

The html code of the website was validated using [W3 Markup Validator](https://validator.w3.org/).


At the time of deployment the validation the following errors find.

<details>
<summary>Base html</summary>
<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708898581/samples/true_care/Readme/base_html_bwoz9l.png" width="100%"><br><br>
</details>

<details>
<summary>Department Page</summary>
<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708898631/samples/true_care/Readme/department_page_ad0dde.png" width="100%"><br><br>
</details>

<details>
<summary>Department Details Page</summary>
<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708898684/samples/true_care/Readme/Department_details_page_lsfkgi.png" width="100%"><br><br>
</details>

<details>
<summary>Appointment Page</summary>
<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708898724/samples/true_care/Readme/Appointment_page_b3frej.png" width="100%"><br><br>
</details>

<details>
<summary>Appointment details Page</summary>
<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708898911/samples/true_care/Readme/appointment_details_page_bml6f1.png" width="100%"><br><br>
</details>

<details>
<summary>Doctor Profile Page</summary>
<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708898880/samples/true_care/Readme/Doctor_profile_kppwdu.png" width="100%"><br><br>
</details>

<details>
<summary>Patient Appointments Page</summary>
<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708899012/samples/true_care/Readme/Patient_appointments_page_ro8qvg.png" width="100%"><br><br>
</details>

<details>
<summary>Patient Profile Page</summary>
<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708899044/samples/true_care/Readme/Patient_profile_page_vf0ayy.png" width="100%"><br><br>
</details>

<details>
<summary>Doctor Diagnosis Page</summary>
<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708899091/samples/true_care/Readme/doctor-diagnosis_page_jndm56.png" width="100%"><br><br>
</details>

<details>
<summary>Doctor Professional deatail Page</summary>
<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708899168/samples/true_care/Readme/professional_details_update_page_bj5led.png" width="100%"><br><br>
</details>
<br>

**The following pages have been tested:**

* Home Page
* About Us Page
* Departments page
* Department Details Page
* Contact us Page
* Appointments Page
* profile page
* update appointment page
* Update Profile page
* Upload picture page
* Patient Appointments page
* doctors Page
* Doctors Profile page
* Doctors details page
* Add doctor details page
* Patient Appointmant details page
* Doctor Appointmant Page


<br>
All The Errors have been fixed. The following Warning is Still there

<details>
<summary>Warning</summary>
<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708899232/samples/true_care/Readme/Pending_Warning_for_all_the_pages_yokqb9.png" width="100%"><br><br>
</details>
<br>


### CSS
The CSS code was validated using [W3 Jigsaw Validator](https://jigsaw.w3.org/css-validator/)<br><br>
Result as follows : No error found<br>

<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708897996/samples/true_care/Readme/CSS_Validation_result_avmgsq.png" width="100%"><br><br>

### Javascript

The Javascript code was validated using using [JsHint](https://jshint.com/)<br>

<details>
<summary>script.js</summary>
<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708900753/samples/true_care/Readme/script.js_Validation_byb0dg.png" width="100%"><br><br>
</details>
<details>
<summary>Doctor profile</summary>
<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708900879/samples/true_care/Readme/Doctor_Profile_u2lixw.png" width="100%"><br><br>
</details>

<details>
<summary>Patient Appointments</summary>
<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708900913/samples/true_care/Readme/Patient_Appointment_wqk702.png" width="100%"><br><br>

</details>
<details>
<summary>update appointments</summary>
<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708900949/samples/true_care/Readme/Update_Appointment_wclocg.png" width="100%"><br><br>
</details>

<details>
<summary>Update Profile</summary>
<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708901028/samples/true_care/Readme/Update_Profile_yhs1eh.png" width="100%"><br><br>
</details>
<details>
<summary>Base HTML</summary>
<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708901069/samples/true_care/Readme/Base_html_oqkgqw.png" width="100%"><br><br>
</details>
<details>
<summary>Doctor Appointment details</summary>
<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708901106/samples/true_care/Readme/Doctor_Appointment_details_jos7o7.png" width="100%"><br><br>
</details>
<details>
<summary>Appointment</summary>
<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708901193/samples/true_care/Readme/Appointment_evonzj.png" width="100%"><br><br>
</details>

<br>

### Python
The python code was tested using [PEP8 (CI Python Linter)](https://pep8ci.herokuapp.com/) validator.<br>

**Pep8 results:**<br>
* **views.py**<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708901860/samples/true_care/Readme/Views_szarl6.png" width="100%"><br><br>

* **urls.py**<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708901988/samples/true_care/Readme/urls_tact7i.png" width="100%"><br><br>

* **models.py**<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708901937/samples/true_care/Readme/models_m7mn3k.png" width="100%"><br><br>

* **forms.py**<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708902024/samples/true_care/Readme/forms_eor8xj.png" width="100%"><br><br>

* **admin.py**<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708902056/samples/true_care/Readme/admin_maybza.png" width="100%"><br><br>

* **signals.py**<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708902141/samples/true_care/Readme/signals_wleoey.png" width="100%"><br><br>

### Accessibility 
The Accessibility of the website was tested with the google plugin: [Accessibility Insights for Web](https://accessibilityinsights.io/docs/web/overview/)

**Results for all pages:**<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708906180/samples/true_care/Readme/Accessiblity_Test_e1ucak.png" width="100%"><br><br>


### Performance
The performance of the website was tested with [Google Lighthouse](https://developer.chrome.com/docs/lighthouse/overview/)

**Lighthouse reports:**<br>

<details>
<summary>Desktop</summary>

* Home page<br>
<img src="docs/read-me-images/validation-images/home-page-lighthouse.png" width="60%"><br><br>

* Messaging page<br>
<img src="docs/read-me-images/validation-images/messaging-lighthouse.png" width="60%"><br><br>

* Profile page<br>
<img src="docs/read-me-images/validation-images/profile-lighthouse.png" width="60%"><br><br>

* Contact page<br>
<img src="docs/read-me-images/validation-images/contact-lighthouse.png" width="60%"><br><br>

* Change password page<br>
<img src="docs/read-me-images/validation-images/passsword-lighthouse.png" width="60%"><br><br>

* email settings page<br>
<img src="docs/read-me-images/validation-images/email-setting-lighthouse.png" width="60%"><br><br>

* Logout page<br>
<img src="docs/read-me-images/validation-images/logout-lighthouse.png" width="60%"><br><br>

* Login page<br>
<img src="docs/read-me-images/validation-images/login-lighthouse.png" width="60%"><br><br>

* Register page<br>
<img src="docs/read-me-images/validation-images/sign-up-lighthouse.png" width="60%"><br><br>
</details>

<details>
<summary>Mobile</summary>  

* Home page<br>
<img src="docs/read-me-images/validation-images/home-page-lighthouse.png" width="60%"><br><br>

* Messaging page<br>
<img src="docs/read-me-images/validation-images/messaging-lighthouse.png" width="60%"><br><br>

* Profile page<br>
<img src="docs/read-me-images/validation-images/profile-lighthouse.png" width="60%"><br><br>

* Contact page<br>
<img src="docs/read-me-images/validation-images/contact-lighthouse.png" width="60%"><br><br>

* Change password page<br>
<img src="docs/read-me-images/validation-images/passsword-lighthouse.png" width="60%"><br><br>

* email settings page<br>
<img src="docs/read-me-images/validation-images/email-setting-lighthouse.png" width="60%"><br><br>

* Logout page<br>
<img src="docs/read-me-images/validation-images/logout-lighthouse.png" width="60%"><br><br>

* Login page<br>
<img src="docs/read-me-images/validation-images/login-lighthouse.png" width="60%"><br><br>

* Register page<br>
<img src="docs/read-me-images/validation-images/sign-up-lighthouse.png" width="60%"><br><br>
</details><br>


## Browser Testing
The website was tested on different browser for assuring the features work accordingly.
* Chrome
* Edge
* Safary
* Opera
* Firefox

## Bugs 

### Unfixed bugs

Due to time constraints, some unresolved errors were left unaddressed, including:

1. If a regular user is created and they only update their personal information, the admin must manually set the IS_DOCTOR value to true if they want to designate the user as a doctor. However, if the user has not yet uploaded a profile picture, the admin cannot change the IS_DOCTOR value unless a picture is uploaded for the doctor or the user uploads an image themselves beforehand.

2. Upon validation of the appointment form using Bootstrap, an error was discovered wherein if the selected booking date is invalid (i.e., today or a past date), an error message "Booking available only from tomorrow" is displayed. However, after correcting the date to a valid one, the form fails to revalidate the date field. Therefore, the form should refresh, requiring the user to complete the form again.

    <img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708910876/samples/true_care/Readme/Apppintment_form_error_ad0j96.png" width="100%">

### Fixed bugs

| **Bug** | **Fix** |
| --- | --- |
| Security concern: When incorporating the appointment ID into the URL, it was discovered that users could potentially access and manipulate appointments by altering the ID in the URL.  | Resolution: The view function has been revised to restrict access solely to the appointment owner, thereby mitigating the security vulnerability. |
| Showing deferent behaviour by the drop down menu in the nav bar, if the user is a doctor.  | To ensure consistent behavior across all pages, retrieve the personal details for the user in all views, enabling the system to identify whether the user is a doctor or not, and adjust the dropdown menu accordingly. |


Back to [README.MD](README.md)<br>