# Testing

Back to [README.MD](README.md)<br>

## Table of contents
* [Code Validation](#code-validation)
* [Manual Feature Testing](#manual-feature-testing)
* [Browser Testing](#browser-testing)
* [Bugs](#bugs)

___

## Code Validation
### HTML

The html code of the website was validated using [W3 Markup Validator](https://validator.w3.org/).


At the time of deployment the validation the following errors find.

<details>
<summary>Base html</summary>
<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708898581/samples/true_care/Readme/base_html_bwoz9l.png" width="100%"><br><br>
</details>

<details>
<summary>Department Page</summary>
<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708898631/samples/true_care/Readme/department_page_ad0dde.png" width="100%"><br><br>
</details>

<details>
<summary>Department Details Page</summary>
<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708898684/samples/true_care/Readme/Department_details_page_lsfkgi.png" width="100%"><br><br>
</details>

<details>
<summary>Appointment Page</summary>
<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708898724/samples/true_care/Readme/Appointment_page_b3frej.png" width="100%"><br><br>
</details>

<details>
<summary>Appointment details Page</summary>
<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708898911/samples/true_care/Readme/appointment_details_page_bml6f1.png" width="100%"><br><br>
</details>

<details>
<summary>Doctor Profile Page</summary>
<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708898880/samples/true_care/Readme/Doctor_profile_kppwdu.png" width="100%"><br><br>
</details>

<details>
<summary>Patient Appointments Page</summary>
<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708899012/samples/true_care/Readme/Patient_appointments_page_ro8qvg.png" width="100%"><br><br>
</details>

<details>
<summary>Patient Profile Page</summary>
<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708899044/samples/true_care/Readme/Patient_profile_page_vf0ayy.png" width="100%"><br><br>
</details>

<details>
<summary>Doctor Diagnosis Page</summary>
<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708899091/samples/true_care/Readme/doctor-diagnosis_page_jndm56.png" width="100%"><br><br>
</details>

<details>
<summary>Doctor Professional deatail Page</summary>
<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708899168/samples/true_care/Readme/professional_details_update_page_bj5led.png" width="100%"><br><br>
</details>
<br>

**The following pages have been tested:**

* Home Page
* About Us Page
* Departments page
* Department Details Page
* Contact us Page
* Appointments Page
* profile page
* update appointment page
* Update Profile page
* Upload picture page
* Patient Appointments page
* doctors Page
* Doctors Profile page
* Doctors details page
* Add doctor details page
* Patient Appointmant details page
* Doctor Appointmant Page


<br>
All errors have been addressed. However, the following warning exist:

<details>
<summary>Warning</summary>
<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708899232/samples/true_care/Readme/Pending_Warning_for_all_the_pages_yokqb9.png" width="100%"><br><br>
</details>

___

### CSS
The CSS code was validated using [W3 Jigsaw Validator](https://jigsaw.w3.org/css-validator/)<br><br>
Result as follows : No error found<br>

<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708897996/samples/true_care/Readme/CSS_Validation_result_avmgsq.png" width="100%"><br><br>
___

### Javascript

The Javascript code was validated using using [JsHint](https://jshint.com/)<br>

<details>
<summary>script.js</summary>
<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708900753/samples/true_care/Readme/script.js_Validation_byb0dg.png" width="100%"><br><br>
</details>
<details>
<summary>Doctor profile</summary>
<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708900879/samples/true_care/Readme/Doctor_Profile_u2lixw.png" width="100%"><br><br>
</details>

<details>
<summary>Patient Appointments</summary>
<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708900913/samples/true_care/Readme/Patient_Appointment_wqk702.png" width="100%"><br><br>

</details>
<details>
<summary>update appointments</summary>
<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708900949/samples/true_care/Readme/Update_Appointment_wclocg.png" width="100%"><br><br>
</details>

<details>
<summary>Update Profile</summary>
<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708901028/samples/true_care/Readme/Update_Profile_yhs1eh.png" width="100%"><br><br>
</details>
<details>
<summary>Base HTML</summary>
<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708901069/samples/true_care/Readme/Base_html_oqkgqw.png" width="100%"><br><br>
</details>
<details>
<summary>Doctor Appointment details</summary>
<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708901106/samples/true_care/Readme/Doctor_Appointment_details_jos7o7.png" width="100%"><br><br>
</details>
<details>
<summary>Appointment</summary>
<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708901193/samples/true_care/Readme/Appointment_evonzj.png" width="100%"><br><br>
</details>

___

### Python
The python code was tested using [PEP8 (CI Python Linter)](https://pep8ci.herokuapp.com/) validator.<br>


<details>
<summary>Pep8 results:<br></summary> 

* **views.py**<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708901860/samples/true_care/Readme/Views_szarl6.png" width="100%"><br><br>

* **urls.py**<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708901988/samples/true_care/Readme/urls_tact7i.png" width="100%"><br><br>

* **models.py**<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708901937/samples/true_care/Readme/models_m7mn3k.png" width="100%"><br><br>

* **forms.py**<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708902024/samples/true_care/Readme/forms_eor8xj.png" width="100%"><br><br>

* **admin.py**<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708902056/samples/true_care/Readme/admin_maybza.png" width="100%"><br><br>

* **signals.py**<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708902141/samples/true_care/Readme/signals_wleoey.png" width="100%"><br><br>

### Accessibility 
The Accessibility of the website was tested with the google plugin: [Accessibility Insights for Web](https://accessibilityinsights.io/docs/web/overview/)

**Results for all pages:**<br>
<img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708906180/samples/true_care/Readme/Accessiblity_Test_e1ucak.png" width="100%"><br><br>
</details>
<br>

___

### Performance
The performance of the website was tested with [Google Lighthouse](https://developer.chrome.com/docs/lighthouse/overview/)

**Lighthouse reports:**<br>

<details>
<summary>Desktop</summary>

* Home page<br>
<img src="docs/read-me-images/validation-images/home-page-lighthouse.png" width="60%"><br><br>

* Messaging page<br>
<img src="docs/read-me-images/validation-images/messaging-lighthouse.png" width="60%"><br><br>

* Profile page<br>
<img src="docs/read-me-images/validation-images/profile-lighthouse.png" width="60%"><br><br>

* Contact page<br>
<img src="docs/read-me-images/validation-images/contact-lighthouse.png" width="60%"><br><br>

* Change password page<br>
<img src="docs/read-me-images/validation-images/passsword-lighthouse.png" width="60%"><br><br>

* email settings page<br>
<img src="docs/read-me-images/validation-images/email-setting-lighthouse.png" width="60%"><br><br>

* Logout page<br>
<img src="docs/read-me-images/validation-images/logout-lighthouse.png" width="60%"><br><br>

* Login page<br>
<img src="docs/read-me-images/validation-images/login-lighthouse.png" width="60%"><br><br>

* Register page<br>
<img src="docs/read-me-images/validation-images/sign-up-lighthouse.png" width="60%"><br><br>
</details>

<details>
<summary>Mobile</summary>  

* Home page<br>
<img src="docs/read-me-images/validation-images/home-page-lighthouse.png" width="60%"><br><br>

* Messaging page<br>
<img src="docs/read-me-images/validation-images/messaging-lighthouse.png" width="60%"><br><br>

* Profile page<br>
<img src="docs/read-me-images/validation-images/profile-lighthouse.png" width="60%"><br><br>

* Contact page<br>
<img src="docs/read-me-images/validation-images/contact-lighthouse.png" width="60%"><br><br>

* Change password page<br>
<img src="docs/read-me-images/validation-images/passsword-lighthouse.png" width="60%"><br><br>

* email settings page<br>
<img src="docs/read-me-images/validation-images/email-setting-lighthouse.png" width="60%"><br><br>

* Logout page<br>
<img src="docs/read-me-images/validation-images/logout-lighthouse.png" width="60%"><br><br>

* Login page<br>
<img src="docs/read-me-images/validation-images/login-lighthouse.png" width="60%"><br><br>

* Register page<br>
<img src="docs/read-me-images/validation-images/sign-up-lighthouse.png" width="60%"><br><br>
</details><br>


## Manual Feature Testing

All available incidents on the website have been manually tested, and the results are as follows: <br>
### **Before sign Up / Login**
| **Feature** | **Action** | **Expected Result** | **Actual Result** | 
|-------------|------------|---------------------|-------------------|
| Open the website | Click the link | Open the home page | Works as expected |
| SignUp & login Buttons | open the website without login | Must show the sugnup/ login button | Works as expected |
| Hospital details visible to all the visiters | open the website | User can navigate though all the details of the hospital including Home,About us, departments, contact Us pages | Works as expected |
| Footer Links | click on the links | Navigate to deferent pages same as the header Nav buttons | Works as expected |
| Click the number/ email to open call/email option | click the number/email | clicking on the number/mail will open the call/ mail app | Works as expected |
| Social Media | click on the icon in the footer | Open the social media app | Works as expected |
| Department page | click on the department button | department page will show all the departments dynamically from the database with a learn more button for each department | works as expected |
| department details page | click the learn more button from any of the department | open a detailed page of the department with dynamically loaded the doctors details those who works in that department. | works as expected |
|contact us page | click on the contact us button | A contact page is open with necessory contact details, additionally a form is avilable to write any message to the hospital if the user want to| Works as expected |
| contact form | input invalid data and submit | error messages shown | works as expected |
| contact form | input valid data and submit | message submitted and show a confirmation message | works as expected |
| Appointment Creation only for authorised users | click on any of the appointment button in the website before login | Navigate to the Signup / login Page to inform the user that to create an appointment, they should signup or login | Works as expected |

### **Signup / login as a patient**

| **Feature** | **Action** | **Expected Result** | **Actual Result** | 
|-------------|------------|---------------------|-------------------|
| sign up | input user name, email, password and wrong confirm password | Show an error message in the confirm password area | works as expected |
| sign up | input wrong email format | show error message under the mail input field | works as expected |
| Sign Up | input the username, email, password and confirm password | Create a user instance with the provided details then login and navigate to update profile page  automatically, also a confirmation mail will send to the given email and the notification will show in the screen| Works as expected |
| Update Profile form | leave the input field blank and try to submit | show error message near the corresponding fields | works as expected |
| update profile form | Fill all  the data correctly | form will be submitted and the data stored in the datastore and navigate the user to the profile showing all the details on the screen  | Works as expected |
| Profile photo | click on the default photo in the profile | profile upload page will open | works as expected |
| upload photo | upload a photo more than 10MB | show an alert "File size too large. Maximum is 10 MB". | works as expected |
|upload photo | upload a photo less than 10 MB | update the profile picture and redirected to the profile page | works as expected |
| My appointments in the profile | click on the My appointments button | The page is navigatted to the Appointments page there the user can see the created appointments | works as expected |
| My appointments in the profile | click on the My appointments button | As a new user there will not be any appointments. So there will a message "You have no scheduled appointments. Book now!",With a button to navigate to the appointment form | Works as expected |
| Appointment Form | Click any of the button for the appointment | Appointment form is loaded with all the pre updated personal details | Works as expected |
| Appointment form | add some wrong formatted inputs | error message for each wrong inputs | works as expected |
| Appointment form | add wrong input in the date filed | show error message, if the data is changed to correct format the form works properly | unexpectedly The form submission is not working, Need to refresh the page to submit the form |
| Appointment form | choose a department | The doctor field is dynamicaly loaded for the selected department | Works as expected |
| Appointment form | Fill all the details properly | New appointment created and the page is navigated to the appointments in the profile page, also show a notification message  for the user | Works as expected |
| Appointments Page | click on the Upcoming appointments button | Show the upcoming appointments of the user if any otherwise show a message | Works as expected |
| Appointment page | click on the Attended appointments button | show the attended appointments if any otherwise show a message | Works as expected |
| Appointment page | click on the All appointments button | show the all appointments if any otherwise show a message | Works as expected |
| Appointment Page | click on the personal details button | navigatted to the personal details page | works as expected |
| Appointment details | click on the details button in the Appointment | open the detailed view of the appointments. if the appointment is not attended it will show a message saying, "you have scheduled an appointment with the doctor on the date" | Works as expected |
| Appointment details | click on the details button in the appointment | If the appointment is already attended prescription and medical reports will be shown if the doctor uploaded any | works as expected |
| delete appointment | click on the delate button in the appointment | An alert is promted to confirm the delete if choose OK the appointment will deleted | works as expected |
| Delete Button | Check the delete button | if the appointment is attende the delete button will disabled | works as expected |
| Update appointment | click on the edit button in the appointment details page | update appointment form will show | works as expected |
| update appointment | add invalid data | error message will show | works as expected |
| update appointment | add valid data | the appointment is updated and a message will show in the page, also if the appointment was already approved, its status will change to Not Approved | works as expected |
| Login | add invalid data and click login | error message will show | works as expected |
| login | add valid data and click login | user logged in and a message will show | works as expected |
|log out |click log out button | navigated to the log out page to confirm the log out if choose log out the user will logged out with a notification message | workes as expected |

<br>

### **Login as a Doctor**

| **Feature** | **Action** | **Expected Result** | **Actual Result** | 
|-------------|------------|---------------------|-------------------|
| Drop down Menu | click on the dropdown menu in the nav bar | The options in the list will be deferent from the normal user | Works as expected |
| Personal details page | navigate to the personal details page | There will be a extra professional details section as the user is a doctor | Works as expected |
|professional details | click the update button on the professional details section in the profile page or select the professional details from the drop down menu | A form to fill by the doctor will be loaded | Works as expected |
| professional details Form | add invalid data and click submit | Show errors | Works as expected |
| professional details form | add valid data and click submit | updated the professional details and navigated to the personal details page, also show a message for the confirmation | Works as expected |
| professional details form | open the professional details form | if the details aready entered, the details will will show when the form loads | works as expected |
| Doctor Profile | choose doctor profile from the deop down menu | Open the list of todays appointments booked and for the doctor that are approved will show there. also navigation buttons to the all appointments, upcoming appointments , Pending approval, Attended appointments etc | Works as expected |
| appointment behaviours | open deferent appointment pages | appointments have deferent behaviours in deferent pages. | works as expected |
| change appointment | open pending approval page and click on the change button | update appointment form will open and the doctor have the permision to change the appointment | works as expected |
| Approve | click approve button | the appointment is aproved and the is _approved value is set to true and the approve button change to disapprove button, also in the patient appointment page, the status is changed to approved | works as expected |
| appointment details for doctor | click open button in the appointment | open a appointment details page | works as expected |
| diagnosis form | add invalid data and save | show error message | works as expected |
| diagnosis form | add valid data and save | the form will be saved and the appointment status will change to  attended| works as expected |
| prescription form | add invalid data and click add medicine button | show error messages | works as expected |
|prescription form | add valid data and  click add medicine button | the medicine added to the appointment and dynamically show it in the prescription section with a delete button also the same prescription will show in the patients appointment details page | works as expected |
| medical report form | add invalid data and click add report button | show error messages | works as expected |
|medical report form | add valid data and  click add medicine button | the medical report added to the appointment and dynamically show it in the medical report section with delete and show buttons also the same medical report will show in the patients appointment details page | works as expected |
| delete prescription | click the delete button in the prescription | the prescription is deleted from the appointment, also from the patient appointment page | works as expected |
| delete medical report | click the delete button in the medical report | the medical report is deleted from the appointment, also from the patient appointment page | works as expected |


## Browser Testing
The website was tested on different browser for assuring the features work accordingly.
* Chrome
* Edge
* Safary
* Opera
* Firefox

## Bugs 

### Unfixed bugs

Due to time constraints, some unresolved errors were left unaddressed, including:

1. If a regular user is created and they only update their personal information, the admin must manually set the IS_DOCTOR value to true if they want to designate the user as a doctor. However, if the user has not yet uploaded a profile picture, the admin cannot change the IS_DOCTOR value unless a picture is uploaded for the doctor or the user uploads an image themselves beforehand.

2. Upon validation of the appointment form using Bootstrap, an error was discovered wherein if the selected booking date is invalid (i.e., today or a past date), an error message "Booking available only from tomorrow" is displayed. However, after correcting the date to a valid one, the form fails to revalidate the date field. Therefore, the form should refresh, requiring the user to complete the form again.

    <img src="https://res.cloudinary.com/dgd5gtn1w/image/upload/v1708910876/samples/true_care/Readme/Apppintment_form_error_ad0j96.png" width="100%">

### Fixed bugs

| **Bug** | **Fix** |
| --- | --- |
| Security concern: When incorporating the appointment ID into the URL, it was discovered that users could potentially access and manipulate appointments by altering the ID in the URL.  | Resolution: The view function has been revised to restrict access solely to the appointment owner, thereby mitigating the security vulnerability. |
| Showing deferent behaviour by the drop down menu in the nav bar, if the user is a doctor.  | To ensure consistent behavior across all pages, retrieve the personal details for the user in all views, enabling the system to identify whether the user is a doctor or not, and adjust the dropdown menu accordingly. |


Back to [README.MD](README.md)<br>